<!-- Shop Cart -->

<div class="offcanvas offcanvas-end" tabindex="-1" id="offcanvasRight" aria-labelledby="offcanvasRightLabel">
	<div class="offcanvas-header border-bottom">
		<div class="text-start">
			<h5 id="offcanvasRightLabel" class="mb-0 fs-4">Shop Cart</h5>
			<small>Location in 274203</small>
		</div>
		<button type="button" class="btn-close text-reset" data-bs-dismiss="offcanvas" aria-label="Close"></button>
	</div>
	<div class="offcanvas-body">
		<div>
			<!-- alert -->
			<!-- <div class="alert alert-danger p-2" role="alert">
				You’ve got FREE delivery. Start
				<a href="#!" class="alert-link">checkout now!</a>
			</div> -->
			<ul class="list-group list-group-flush">
				<!-- list group -->
				
				<!-- list group -->
				<% if (cartProducts.length > 0) { %>
					<% cartProducts.forEach(product => { %>
						<li class="list-group-item py-3 ps-0">
						  <!-- row -->
						  <div class="row align-items-center">
							<div class="col-6 col-md-6 col-lg-7">
							  <div class="d-flex">
								<img src="../upload/<%= product.image %>" alt="Product Image" class="icon-shape icon-xxl" />
								<div class="ms-3">
								  <a href="#" class="text-inherit">
									<h6 class="mb-0"><%= product.name %></h6>
								  </a>
								  <% category.forEach(data => { %>
									<% if (data._id.toString() === product.category.toString()) { %>
								<span><small class="text-muted"><%= data.title %></small></span>
										
									<% } %>
								<% }); %>
								  <!-- text -->
								  <div class="mt-2 small lh-1">
									<a href="/removeFromCart/<%= product._id %>" class="text-decoration-none text-inherit">
									  <span class="me-1 align-text-bottom">
										<svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-trash-2 text-success">
										  <polyline points="3 6 5 6 21 6"></polyline>
										  <path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path>
										  <line x1="10" y1="11" x2="10" y2="17"></line>
										  <line x1="14" y1="11" x2="14" y2="17"></line>
										</svg>
									  </span>
									  <span class="text-muted">Remove </span>
									</a>
								  </div>
								</div>
							  </div>
							</div>
					
							<!-- input group -->
							<div class="col-4 col-md-3 col-lg-3">
								<!-- Input spinner for quantity -->
								<div class="input-group input-spinner">
									<!-- Decrease quantity button -->
									<!-- <button type="button" class="button-minus btn btn-sm" data-field="quantity">-</button> -->
									
									<!-- Quantity input field -->
									<% let quantity = 0; %>
									<% cartItems.forEach(cartItem => { %>
										<% if (cartItem.productId.toString() === product._id.toString()) { %>
											<% quantity = cartItem.quantity; %>
										<% } %>
									<% }); %>
									<input type="number" step="1" max="10" value="<%= quantity %>" name="quantity" class="quantity-field form-control-sm form-input" readonly />
									
									<span class="form-control-sm fs-6">
										<% units.forEach(unit => { %>
											<% if (unit._id.toString() === product.units.toString()) { %>
												<%= unit.name?unit.name:''; %>
											<% } %>
										<% }); %>
									</span>
									
									<!-- Increase quantity button (inside a form for submission) -->
									<!-- <form id="addToCartForm_<%= product._id %>" action="/addToCartlist" method="POST">
										<input type="hidden" name="productId" value="<%= product._id %>">
										<button type="submit" class="button-plus btn btn-sm" data-field="quantity">+</button>
									</form> -->
								</div>
							</div>
							
							
							<!-- price -->
							<div class="col-2 text-lg-end text-start text-md-end col-md-2">
							  <span class="fw-bold text-danger">₹ <%= product.discounted_price * quantity %>/-</span>
							  <div class="text-decoration-line-through text-muted small">₹ <%= product.price %></div>
							</div>
						  </div>
						</li>
					  <% }) %>
					<% } else {%>
						<li class="list-group-item py-3 ps-0 border-bottom border-top text-center">No Item Added To Cart</li>
						<% } %>
					
				  
			</ul>
			<!-- btn -->
			<div class="d-flex justify-content-between mt-4">
				<a href="/shop-cart" class="btn btn-primary">Continue Shopping</a>
				<a href="#!" class="btn btn-dark">Update Cart</a>
			</div>
		</div>
	</div>
</div>